extends layout 

block content 
  h1= title 

  p This is the page of #{currentUser.firstname + " " + currentUser.lastname}
  p(style="margin-bottom:20px")= currentUser.username
  p Creator: !{currentUser.creator ? currentUser.creator.name : null}
  p Page: #{currentUser.creator.page}
  p Region: #{country_names[currentUser.region]}

  if !currentUser.isVerified 
    form(method="POST" action="/verify/resend") 
      input#email(type="hidden" name="email" required="true" value=currentUser.username)
      button.btn.btn-primary(type="submit") Resend Verification Email

  div 
    if subs 
      each sub in subs 
        - console.log(sub)
        hr
        p Subscription: 
        p= sub.page.title 
        p Tier: #{sub.membership ? sub.membership.title : "Membership Tier Deleted"}
        p Status: #{sub.status}
        div 
          if sub.status !== "canceled"
            form.form(method="POST" action="/subscribe/cancel-subscription") 
              input#creatorId(type='hidden' name="creatorId" value=sub.page.user)
              input#stripeSubId(type='hidden' name="stripeSubId" value=sub.stripeSubscriptionId)
              button.btn.btn-secondary(type="submit") Cancel
        if !sub.membership
          p(style="color:red") Attn: Creator deleted membership